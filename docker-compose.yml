version: '3.8'

services:

  db:
    image: "mysql:5.7.31"
    container_name: db
    env_file: .env
    volumes: 
      - ./db/volumes/docker-entrypoint-initdb.d/:/docker-entrypoint-initdb.d/
    command: ["mysqld"]
    expose:
      - 3306

  adminer:
    image: "adminer:4.7.7"
    container_name: adminer
    expose: 
      - 8080

  backend:
    container_name: backend
    build:
      context: ./backend
    env_file: .env
    expose: 
      - 3000

  frontend:
    container_name: frontend
    build:
      context: ./frontend
    expose:
      - 3000

  webserver:
    container_name: webserver
    build:
      context: ./webserver
    ports:
      - 80:80
      - 443:443
